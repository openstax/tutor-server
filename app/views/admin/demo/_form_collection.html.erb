<%
  # Clients of this partial must provide the following variables:
  # form
  # scope
  # partial
  # Additionally, they may override the following variables:
  collection ||= form.object[scope] if form.respond_to?(:object)
  name ||= scope.to_s.singularize.humanize
  options ||= {}
%>

<div class="collection form-group">
  <%= form.label scope %>

  <%= form.fields scope, model: collection do |fields| %>
    <ul class="template">
      <%=
        render partial: 'form_collection_item', locals: {
          form: fields, partial: partial, name: name, options: options.merge(disabled: true)
        }
      %>
    </ul>
    <ol class="list">
      <% (fields.object || []).each do |item| %>
        <%=
          render partial: 'form_collection_item',
          locals: { form: fields, partial: partial, name: name, item: item }
        %>
      <% end %>
    </ol>
  <% end %>

  <%= link_to "Add #{name}", '#', remote: true, class: 'add' %>
</div>
